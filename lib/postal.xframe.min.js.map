{"version":3,"sources":["postal.xframe.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_1__","__WEBPACK_EXTERNAL_MODULE_2__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","listener","plugin","routeMessage","apply","arguments","listenToWorker","worker","_","include","state","workers","addEventListener","push","_interopRequire","obj","__esModule","postal","_utils","_memoRemoteByInstanceId","_memoRemoteByTarget","_disconnectClient","safeSerialize","_state","env","XFrameClient","getInstance","source","origin","instanceId","client","isWorker","Worker","options","target","NO_OP","fedx","transports","xframe","eagerSerialize","useEagerSerialize","configure","cfg","config","defaults","extend","clearConfiguration","getTargets","postMessage","targets","map","document","getElementsByTagName","i","urlHack","createElement","href","src","protocol","host","contentWindow","defaultOriginUrl","window","parent","concat","remotes","wrapForTransport","packingSlip","JSON","stringify","unwrapFromTransport","msgData","indexOf","parse","ex","event","currentTarget","parsed","data","remote","find","x","onMessage","sendMessage","envelope","cloneDeep","forEach","disconnect","clients","reduce","isArray","bind","doNotNotify","without","signalReady","callback","length","def","sendPing","eventName","handler","bubble","Error","stopListeningToWorker","removeEventListener","pop","memo","proxy","tgt","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","entries","Symbol","iterator","next","done","_step$value","_slicedToArray","value","key","val","isPlainObject","err","arr","Array","Object","_arr","TypeError","defineProperty","regeneratorRuntime","mark","k","wrap","context$1$0","prev","keys","t0","finish","stop","location","test","navigator","userAgent","allowedOrigins","enabled","_createClass","defineProperties","props","prop","configurable","writable","Constructor","protoProps","staticProps","prototype","_get","get","object","property","receiver","desc","getOwnPropertyDescriptor","getPrototypeOf","getter","_inherits","subClass","superClass","create","constructor","enumerable","__proto__","_classCallCheck","instance","_postal$fedx$FederationClient","_len","args","_key","transportName","shouldProcess","hasDomainFilters","includes","send","context","FederationClient"],"mappings":"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","file":"postal.xframe.min.js","sourcesContent":["/*!\n *  * postal.xframe - postal.js/postal.federation plugin for federating instances of postal.js across iframe/window boundaries.\n *  * Author: Jim Cowart (http://ifandelse.com)\n *  * Version: v0.5.1\n *  * Url: http://github.com/postaljs/postal.xframe\n *  * License(s): (MIT OR GPL-2.0)\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"), require(\"postal\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\", \"postal\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"postalXframe\"] = factory(require(\"lodash\"), require(\"postal\"));\n\telse\n\t\troot[\"postalXframe\"] = factory(root[\"_\"], root[\"postal\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// istanbul ignore next\n\t\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\t\n\tvar _ = _interopRequire(__webpack_require__(1));\n\t\n\tvar postal = _interopRequire(__webpack_require__(2));\n\t\n\tvar _utils = __webpack_require__(3);\n\t\n\tvar _memoRemoteByInstanceId = _utils._memoRemoteByInstanceId;\n\tvar _memoRemoteByTarget = _utils._memoRemoteByTarget;\n\tvar _disconnectClient = _utils._disconnectClient;\n\tvar safeSerialize = _utils.safeSerialize;\n\t\n\tvar _state = __webpack_require__(4);\n\t\n\tvar state = _state.state;\n\tvar env = _state.env;\n\t\n\tvar XFrameClient = _interopRequire(__webpack_require__(5));\n\t\n\tfunction listener() {\n\t\tplugin.routeMessage.apply(plugin, arguments);\n\t}\n\t\n\tfunction listenToWorker(worker) {\n\t\tif (!_.include(state.workers, worker)) {\n\t\t\tworker.addEventListener(\"message\", listener);\n\t\t\tstate.workers.push(worker);\n\t\t}\n\t}\n\t\n\tXFrameClient.getInstance = function getInstance(source, origin, instanceId) {\n\t\tvar client = new XFrameClient(source, {\n\t\t\torigin: origin,\n\t\t\tisWorker: typeof Worker !== \"undefined\" && source instanceof Worker\n\t\t}, instanceId);\n\t\tif (client.options.isWorker) {\n\t\t\tlistenToWorker(client.target);\n\t\t}\n\t\treturn client;\n\t};\n\t\n\tvar NO_OP = function NO_OP() {};\n\t\n\tvar plugin = postal.fedx.transports.xframe = {\n\t\teagerSerialize: env.useEagerSerialize,\n\t\tXFrameClient: XFrameClient,\n\t\tconfigure: function configure(cfg) {\n\t\t\tif (cfg) {\n\t\t\t\tstate.config = _.defaults(_.extend(state.config, cfg), state.defaults);\n\t\t\t}\n\t\t\treturn state.config;\n\t\t},\n\t\tclearConfiguration: function clearConfiguration() {\n\t\t\tstate.config = _.extend({}, state.defaults);\n\t\t},\n\t\t//find all iFrames and the parent window if in an iframe\n\t\tgetTargets: env.isWorker ? function () {\n\t\t\treturn [{\n\t\t\t\ttarget: {\n\t\t\t\t\tpostMessage: postMessage\n\t\t\t\t}\n\t\t\t}]; // TO-DO: look into this...\n\t\t} : function () {\n\t\t\tvar targets = _.map(document.getElementsByTagName(\"iframe\"), function (i) {\n\t\t\t\tvar urlHack = document.createElement(\"a\");\n\t\t\t\turlHack.href = i.src;\n\t\t\t\tvar origin = urlHack.protocol + \"//\" + urlHack.host;\n\t\t\t\t// The following condition fixes the IE issue of setting the origin while the iframe is 'empty':\n\t\t\t\t// if the iframe has no 'src' set to some meaningful url (at this very moment),\n\t\t\t\t// then the urlHack returns neither protocol nor host information.\n\t\t\t\tif (origin === \"//\") {\n\t\t\t\t\torigin = null;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\ttarget: i.contentWindow,\n\t\t\t\t\torigin: origin || state.config.defaultOriginUrl\n\t\t\t\t};\n\t\t\t});\n\t\t\tif (window.parent && window.parent !== window) {\n\t\t\t\ttargets.push({\n\t\t\t\t\ttarget: window.parent,\n\t\t\t\t\torigin: \"*\"\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn targets.concat(state.workers);\n\t\t},\n\t\tremotes: [],\n\t\twrapForTransport: env.useEagerSerialize ? function (packingSlip) {\n\t\t\treturn JSON.stringify({\n\t\t\t\tpostal: true,\n\t\t\t\tpackingSlip: packingSlip\n\t\t\t});\n\t\t} : function (packingSlip) {\n\t\t\treturn {\n\t\t\t\tpostal: true,\n\t\t\t\tpackingSlip: packingSlip\n\t\t\t};\n\t\t},\n\t\tunwrapFromTransport: function unwrapFromTransport(msgData) {\n\t\t\tif (typeof msgData === \"string\" && (env.useEagerSerialize || msgData.indexOf(\"\\\"postal\\\":true\") !== -1)) {\n\t\t\t\ttry {\n\t\t\t\t\treturn JSON.parse(msgData);\n\t\t\t\t} catch (ex) {\n\t\t\t\t\treturn {};\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn msgData;\n\t\t\t}\n\t\t},\n\t\trouteMessage: function routeMessage(event) {\n\t\t\t// source = remote window or worker?\n\t\t\tvar source = event.source || event.currentTarget;\n\t\t\tvar parsed = this.unwrapFromTransport(event.data);\n\t\t\tif (parsed.postal) {\n\t\t\t\tvar remote = _.find(this.remotes, function (x) {\n\t\t\t\t\treturn x.target === source;\n\t\t\t\t});\n\t\t\t\tif (!remote) {\n\t\t\t\t\tremote = XFrameClient.getInstance(source, event.origin, parsed.packingSlip.instanceId);\n\t\t\t\t\tthis.remotes.push(remote);\n\t\t\t\t}\n\t\t\t\tremote.onMessage(parsed.packingSlip);\n\t\t\t}\n\t\t},\n\t\tsendMessage: function sendMessage(env) {\n\t\t\tvar envelope = env;\n\t\t\tif (state.config.safeSerialize) {\n\t\t\t\tenvelope = safeSerialize(_.cloneDeep(env));\n\t\t\t}\n\t\t\t_.forEach(this.remotes, function (remote) {\n\t\t\t\tremote.sendMessage(envelope);\n\t\t\t});\n\t\t},\n\t\tdisconnect: function disconnect(options) {\n\t\t\toptions = options || {};\n\t\t\tvar clients = options.instanceId ?\n\t\t\t// an instanceId value or array was provided, let's get the client proxy instances for the id(s)\n\t\t\t_.reduce(_.isArray(options.instanceId) ? options.instanceId : [options.instanceId], _.bind(_memoRemoteByInstanceId, this), []) :\n\t\t\t// Ok so we don't have instanceId(s), let's try target(s)\n\t\t\toptions.target ?\n\t\t\t// Ok, so we have a targets array, we need to iterate over it and get a list of the proxy/client instances\n\t\t\t_.reduce(_.isArray(options.target) ? options.target : [options.target], _.bind(_memoRemoteByTarget, this), []) :\n\t\t\t// aww, heck - we don't have instanceId(s) or target(s), so it's ALL THE REMOTES\n\t\t\tthis.remotes;\n\t\t\tif (!options.doNotNotify) {\n\t\t\t\t_.forEach(clients, _.bind(_disconnectClient, this));\n\t\t\t}\n\t\t\tthis.remotes = _.without.apply(null, [this.remotes].concat(clients));\n\t\t},\n\t\tsignalReady: function signalReady(targets, callback) {\n\t\t\ttargets = _.isArray(targets) ? targets : [targets];\n\t\t\ttargets = targets.length ? targets : this.getTargets();\n\t\t\tcallback = callback || NO_OP;\n\t\t\t_.forEach(targets, _.bind(function (def) {\n\t\t\t\tif (def.target) {\n\t\t\t\t\tdef.origin = def.origin || state.config.defaultOriginUrl;\n\t\t\t\t\tvar remote = _.find(this.remotes, function (x) {\n\t\t\t\t\t\treturn x.target === def.target;\n\t\t\t\t\t});\n\t\t\t\t\tif (!remote) {\n\t\t\t\t\t\tremote = XFrameClient.getInstance(def.target, def.origin);\n\t\t\t\t\t\tthis.remotes.push(remote);\n\t\t\t\t\t}\n\t\t\t\t\tremote.sendPing(callback);\n\t\t\t\t}\n\t\t\t}, this));\n\t\t},\n\t\taddEventListener: env.isWorker ? function () {\n\t\t\taddEventListener(\"message\", listener);\n\t\t} : function (eventName, handler, bubble) {\n\t\t\t// in normal browser context\n\t\t\tif (typeof window !== \"undefined\" && typeof window.addEventListener === \"function\") {\n\t\t\t\twindow.addEventListener(eventName, handler, bubble);\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"postal.xframe only works with browsers that support window.addEventListener\");\n\t\t\t}\n\t\t},\n\t\tlistenToWorker: listenToWorker,\n\t\tstopListeningToWorker: function stopListeningToWorker(worker) {\n\t\t\tif (worker) {\n\t\t\t\tworker.removeEventListener(\"message\", listener);\n\t\t\t\tstate.workers = _.without(state.workers, worker);\n\t\t\t} else {\n\t\t\t\twhile (state.workers.length) {\n\t\t\t\t\tstate.workers.pop().removeEventListener(\"message\", listener);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t\n\tplugin.addEventListener(\"message\", listener, false);\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// istanbul ignore next\n\t\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\t\n\t// istanbul ignore next\n\t\n\tvar _slicedToArray = function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { var _arr = []; for (var _iterator = arr[Symbol.iterator](), _step; !(_step = _iterator.next()).done;) { _arr.push(_step.value); if (i && _arr.length === i) break; } return _arr; } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } };\n\t\n\texports._memoRemoteByInstanceId = _memoRemoteByInstanceId;\n\texports._memoRemoteByTarget = _memoRemoteByTarget;\n\texports._disconnectClient = _disconnectClient;\n\texports.safeSerialize = safeSerialize;\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _ = _interopRequire(__webpack_require__(1));\n\t\n\tfunction _memoRemoteByInstanceId(memo, instanceId) {\n\t\tvar proxy = _.find(this.remotes, function (x) {\n\t\t\treturn x.instanceId === instanceId;\n\t\t});\n\t\tif (proxy) {\n\t\t\tmemo.push(proxy);\n\t\t}\n\t\treturn memo;\n\t}\n\t\n\tfunction _memoRemoteByTarget(memo, tgt) {\n\t\tvar proxy = _.find(this.remotes, function (x) {\n\t\t\treturn x.target === tgt;\n\t\t});\n\t\tif (proxy) {\n\t\t\tmemo.push(proxy);\n\t\t}\n\t\treturn memo;\n\t}\n\t\n\tfunction _disconnectClient(client) {\n\t\tclient.disconnect();\n\t}\n\t\n\tfunction safeSerialize(envelope) {\n\t\tvar _iteratorNormalCompletion = true;\n\t\tvar _didIteratorError = false;\n\t\tvar _iteratorError = undefined;\n\t\n\t\ttry {\n\t\t\tfor (var _iterator = entries(envelope)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\tvar _step$value = _slicedToArray(_step.value, 2);\n\t\n\t\t\t\tvar key = _step$value[0];\n\t\t\t\tvar val = _step$value[1];\n\t\n\t\t\t\tif (typeof val === \"function\") {\n\t\t\t\t\tdelete envelope[key];\n\t\t\t\t}\n\t\t\t\tif (_.isPlainObject(val)) {\n\t\t\t\t\tsafeSerialize(val);\n\t\t\t\t}\n\t\t\t\tif (_.isArray(val)) {\n\t\t\t\t\t_.forEach(val, safeSerialize);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError = true;\n\t\t\t_iteratorError = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion && _iterator[\"return\"]) {\n\t\t\t\t\t_iterator[\"return\"]();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\treturn envelope;\n\t}\n\t\n\tvar entries = regeneratorRuntime.mark(function entries(obj) {\n\t\tvar _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, k;\n\t\n\t\treturn regeneratorRuntime.wrap(function entries$(context$1$0) {\n\t\t\twhile (1) switch (context$1$0.prev = context$1$0.next) {\n\t\t\t\tcase 0:\n\t\t\t\t\tif ([\"object\", \"function\"].indexOf(typeof obj) === -1) {\n\t\t\t\t\t\tobj = {};\n\t\t\t\t\t}\n\t\t\t\t\t_iteratorNormalCompletion = true;\n\t\t\t\t\t_didIteratorError = false;\n\t\t\t\t\t_iteratorError = undefined;\n\t\t\t\t\tcontext$1$0.prev = 4;\n\t\t\t\t\t_iterator = Object.keys(obj)[Symbol.iterator]();\n\t\n\t\t\t\tcase 6:\n\t\t\t\t\tif (_iteratorNormalCompletion = (_step = _iterator.next()).done) {\n\t\t\t\t\t\tcontext$1$0.next = 13;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tk = _step.value;\n\t\t\t\t\tcontext$1$0.next = 10;\n\t\t\t\t\treturn [k, obj[k]];\n\t\n\t\t\t\tcase 10:\n\t\t\t\t\t_iteratorNormalCompletion = true;\n\t\t\t\t\tcontext$1$0.next = 6;\n\t\t\t\t\tbreak;\n\t\n\t\t\t\tcase 13:\n\t\t\t\t\tcontext$1$0.next = 19;\n\t\t\t\t\tbreak;\n\t\n\t\t\t\tcase 15:\n\t\t\t\t\tcontext$1$0.prev = 15;\n\t\t\t\t\tcontext$1$0.t0 = context$1$0[\"catch\"](4);\n\t\t\t\t\t_didIteratorError = true;\n\t\t\t\t\t_iteratorError = context$1$0.t0;\n\t\n\t\t\t\tcase 19:\n\t\t\t\t\tcontext$1$0.prev = 19;\n\t\t\t\t\tcontext$1$0.prev = 20;\n\t\n\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator[\"return\"]) {\n\t\t\t\t\t\t_iterator[\"return\"]();\n\t\t\t\t\t}\n\t\n\t\t\t\tcase 22:\n\t\t\t\t\tcontext$1$0.prev = 22;\n\t\n\t\t\t\t\tif (!_didIteratorError) {\n\t\t\t\t\t\tcontext$1$0.next = 25;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tthrow _iteratorError;\n\t\n\t\t\t\tcase 25:\n\t\t\t\t\treturn context$1$0.finish(22);\n\t\n\t\t\t\tcase 26:\n\t\t\t\t\treturn context$1$0.finish(19);\n\t\n\t\t\t\tcase 27:\n\t\t\t\tcase \"end\":\n\t\t\t\t\treturn context$1$0.stop();\n\t\t\t}\n\t\t}, entries, this, [[4, 15, 19, 27], [20,, 22, 26]]);\n\t});\n\texports.entries = entries;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// istanbul ignore next\n\t\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _ = _interopRequire(__webpack_require__(1));\n\t\n\tvar env = {\n\t\torigin: location.origin || location.protocol + \"//\" + location.host,\n\t\tisWorker: typeof window === \"undefined\" && postMessage && location,\n\t\t// I know, I KNOW. The alternative was very expensive perf & time-wise\n\t\t// so I saved you a perf hit by checking the stinking UA. Sigh.\n\t\t// I sought the opinion of several other devs. We all traveled\n\t\t// to the far east to consult with the wisdom of a monk - turns\n\t\t// out he didn\"t know JavaScript, and our passports were stolen on the\n\t\t// return trip. We stowed away aboard a freighter headed back to the\n\t\t// US and by the time we got back, no one had heard of IE 8 or 9. True story.\n\t\tuseEagerSerialize: /MSIE [8,9]/.test(navigator.userAgent)\n\t};\n\t\n\texports.env = env;\n\tvar defaults = {\n\t\tallowedOrigins: [env.origin],\n\t\tenabled: true,\n\t\tdefaultOriginUrl: \"*\",\n\t\tsafeSerialize: false\n\t};\n\t\n\tvar state = {\n\t\tworkers: [],\n\t\tconfig: _.extend({}, defaults),\n\t\tdefaults: defaults\n\t};\n\texports.state = state;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// istanbul ignore next\n\t\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\t\n\t// istanbul ignore next\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\t// istanbul ignore next\n\t\n\tvar _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\t// istanbul ignore next\n\t\n\tvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\t\n\t// istanbul ignore next\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar postal = _interopRequire(__webpack_require__(2));\n\t\n\tvar _ = _interopRequire(__webpack_require__(1));\n\t\n\tvar _state = __webpack_require__(4);\n\t\n\tvar state = _state.state;\n\tvar env = _state.env;\n\t\n\tvar XFrameClient = (function (_postal$fedx$FederationClient) {\n\t\tfunction XFrameClient() {\n\t\t\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t\t\targs[_key] = arguments[_key];\n\t\t\t}\n\t\n\t\t\t_classCallCheck(this, XFrameClient);\n\t\n\t\t\tthis.transportName = \"xframe\";\n\t\t\t_get(Object.getPrototypeOf(XFrameClient.prototype), \"constructor\", this).apply(this, args);\n\t\t}\n\t\n\t\t_inherits(XFrameClient, _postal$fedx$FederationClient);\n\t\n\t\t_createClass(XFrameClient, {\n\t\t\tshouldProcess: {\n\t\t\t\tvalue: function shouldProcess() {\n\t\t\t\t\tvar hasDomainFilters = !!state.config.allowedOrigins.length;\n\t\t\t\t\treturn state.config.enabled && (this.options.origin === \"*\" || (hasDomainFilters && _.includes(state.config.allowedOrigins, this.options.origin) || !hasDomainFilters) || this.options.isWorker && _.includes(state.workers, this.target) ||\n\t\t\t\t\t// we are in a worker\n\t\t\t\t\tenv.isWorker);\n\t\t\t\t}\n\t\t\t},\n\t\t\tsend: {\n\t\t\t\tvalue: function send(packingSlip) {\n\t\t\t\t\tif (this.shouldProcess()) {\n\t\t\t\t\t\tvar context = env.isWorker ? null : this.target;\n\t\t\t\t\t\tvar args = [postal.fedx.transports.xframe.wrapForTransport(packingSlip)];\n\t\t\t\t\t\tif (!this.options.isWorker && !env.isWorker) {\n\t\t\t\t\t\t\targs.push(this.options.origin);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!env.isWorker) {\n\t\t\t\t\t\t\tif (args.length === 1) {\n\t\t\t\t\t\t\t\tthis.target.postMessage(args[0]);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.target.postMessage(args[0], args[1]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.target.postMessage.apply(context, args);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\n\t\treturn XFrameClient;\n\t})(postal.fedx.FederationClient);\n\t\n\tmodule.exports = XFrameClient;\n\t\n\t// another frame/window\n\n\t// worker\n\n/***/ }\n/******/ ])\n});\n;"]}